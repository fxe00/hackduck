# HackDuck ç´§æ€¥ä¿®å¤

## ğŸš¨ é—®é¢˜æè¿°

### å‘ç°çš„é—®é¢˜
1. **CORBé”™è¯¯**: Cross-Origin Read Blockingé˜»æ­¢äº†æŸäº›è¯·æ±‚
2. **è¯­æ³•é”™è¯¯**: `Uncaught SyntaxError: Unexpected token '<'`
3. **æ•°æ®åŒ…æŠ“å–å¤±è´¥**: ç°åœ¨æ˜¯ä»€ä¹ˆæ•°æ®åŒ…éƒ½æŠ“ä¸åˆ°äº†
4. **ç½‘ç«™æ— æ³•æ‰“å¼€**: æŸäº›ç½‘ç«™å—åˆ°å½±å“

## ğŸ”§ ç´§æ€¥ä¿®å¤æªæ–½

### 1. æ¢å¤webRequest API
**é—®é¢˜**: ä¹‹å‰æ³¨é‡Šæ‰webRequest APIå¯¼è‡´æ‹¦æˆªå¤±æ•ˆ
**è§£å†³**: é‡æ–°å¯ç”¨webRequest APIï¼Œæ³¨é‡Šæ‰injected script

### 2. æ·»åŠ è¯·æ±‚è¿‡æ»¤
**é—®é¢˜**: CORBé”™è¯¯å’Œæ‰©å±•å†…éƒ¨è¯·æ±‚å†²çª
**è§£å†³**: æ·»åŠ URLè¿‡æ»¤ï¼Œè·³è¿‡æ‰©å±•å†…éƒ¨è¯·æ±‚

```typescript
// è·³è¿‡ä¸€äº›ç‰¹æ®Šè¯·æ±‚ï¼Œé¿å…CORBé—®é¢˜
if (details.url.startsWith('chrome-extension://') || 
    details.url.startsWith('moz-extension://') ||
    details.url.startsWith('edge-extension://') ||
    details.url.includes('devtools://')) {
  return;
}
```

### 3. æƒé™ä¼˜åŒ–
**é—®é¢˜**: æƒé™ä¸è¶³å¯¼è‡´æ‹¦æˆªå¤±è´¥
**è§£å†³**: æ·»åŠ debuggeræƒé™

```json
"permissions": [
  "activeTab",
  "storage", 
  "webRequest",
  "declarativeNetRequest",
  "tabs",
  "scripting",
  "debugger"  // æ–°å¢
]
```

## âœ… ä¿®å¤åçš„æ¶æ„

### å½“å‰æ‹¦æˆªæœºåˆ¶
- **ä¸»è¦æ–¹å¼**: chrome.webRequest API
- **å¤‡ç”¨æ–¹å¼**: å·²æ³¨é‡Šæ‰injected scriptï¼ˆé¿å…å†²çªï¼‰
- **è¿‡æ»¤æœºåˆ¶**: è·³è¿‡æ‰©å±•å†…éƒ¨è¯·æ±‚

### å·¥ä½œæµç¨‹
1. **webRequest.onBeforeRequest**: æ•è·è¯·æ±‚å¼€å§‹
2. **webRequest.onHeadersReceived**: æ•è·å“åº”å¤´
3. **webRequest.onCompleted**: æ•è·è¯·æ±‚å®Œæˆ
4. **æ¶ˆæ¯ä¼ é€’**: background â†’ DevTools panel

## ğŸš€ é¢„æœŸæ•ˆæœ

### ä¿®å¤ååº”è¯¥èƒ½å¤Ÿ
- âœ… æ­£å¸¸æ•è·HTTPè¯·æ±‚
- âœ… æ˜¾ç¤ºæ­£ç¡®çš„è¯·æ±‚çŠ¶æ€
- âœ… é¿å…CORBé”™è¯¯
- âœ… ä¸å½±å“ç½‘ç«™æ­£å¸¸è®¿é—®
- é¿å…è¯­æ³•é”™è¯¯

## ğŸ” è°ƒè¯•å»ºè®®

### å¦‚æœä»æœ‰é—®é¢˜
1. **å®Œå…¨é‡æ–°å®‰è£…æ‰©å±•**
   - åˆ é™¤ç°æœ‰æ‰©å±•
   - é‡æ–°åŠ è½½distæ–‡ä»¶å¤¹
   - é‡æ–°æ‰“å¼€DevTools

2. **æ£€æŸ¥æ§åˆ¶å°**
   - æŸ¥çœ‹æ˜¯å¦æœ‰æ‹¦æˆªæ—¥å¿—
   - æ£€æŸ¥é”™è¯¯ä¿¡æ¯
   - ç¡®è®¤Service WorkerçŠ¶æ€

3. **æµ‹è¯•æ­¥éª¤**
   - æ‰“å¼€ä»»æ„ç½‘ç«™
   - å¼€å¯æ‹¦æˆªåŠŸèƒ½
   - æŸ¥çœ‹è¯·æ±‚åˆ—è¡¨
   - æ£€æŸ¥è¯·æ±‚çŠ¶æ€

## âš ï¸ æ³¨æ„äº‹é¡¹

### é¿å…çš„æ“ä½œ
- ä¸è¦åŒæ—¶å¯ç”¨webRequestå’Œinjected script
- ä¸è¦æ‹¦æˆªæ‰©å±•å†…éƒ¨è¯·æ±‚
- ä¸è¦ä¿®æ”¹manifestæƒé™è¿‡äºé¢‘ç¹

### æœ€ä½³å®è·µ
- ä½¿ç”¨webRequest APIä½œä¸ºä¸»è¦æ‹¦æˆªæ–¹å¼
- æ·»åŠ é€‚å½“çš„URLè¿‡æ»¤
- ä¿æŒæƒé™æœ€å°åŒ–åŸåˆ™

---

*ç´§æ€¥ä¿®å¤å®Œæˆæ—¶é—´: 2024å¹´10æœˆ1æ—¥*
