# HackDuck è¯·æ±‚PendingçŠ¶æ€ä¿®å¤

## ğŸ”§ é—®é¢˜åˆ†æ

### è¯·æ±‚ä¸€ç›´å¤„äºPendingçŠ¶æ€çš„åŸå› 
1. **åŒé‡æ‹¦æˆªå†²çª**: åŒæ—¶ä½¿ç”¨äº†`chrome.webRequest` APIå’Œinjected scriptæ‹¦æˆª
2. **è¯·æ±‚åŒ¹é…é—®é¢˜**: webRequestçš„è¯·æ±‚IDä¸injected scriptçš„è¯·æ±‚IDä¸åŒ¹é…
3. **å“åº”æ•è·å¤±è´¥**: å“åº”ä¿¡æ¯æ²¡æœ‰æ­£ç¡®ä¼ é€’åˆ°DevToolsé¢æ¿

## ğŸ“ ä¿®å¤æ–¹æ¡ˆ

### 1. ç»Ÿä¸€æ‹¦æˆªæœºåˆ¶
**ä¹‹å‰**: åŒæ—¶ä½¿ç”¨webRequest APIå’Œinjected script
**ç°åœ¨**: ä¼˜å…ˆä½¿ç”¨injected scriptï¼Œæ³¨é‡Šæ‰webRequestæ‹¦æˆª

```typescript
// æ³¨é‡Šæ‰webRequestæ‹¦æˆªï¼Œä¼˜å…ˆä½¿ç”¨injected script
// chrome.webRequest.onBeforeRequest.addListener(...)
// chrome.webRequest.onHeadersReceived.addListener(...)
// chrome.webRequest.onCompleted.addListener(...)
```

### 2. ä¼˜åŒ–injected scriptæ‹¦æˆª
**ä¼˜åŠ¿**:
- èƒ½æ•è·åˆ°å®Œæ•´çš„è¯·æ±‚å’Œå“åº”ä¿¡æ¯
- åŒ…æ‹¬å“åº”ä½“å’Œå“åº”å¤´
- æ›´å‡†ç¡®çš„è¯·æ±‚çŠ¶æ€æ›´æ–°

### 3. ä¿®å¤é”™è¯¯å¤„ç†
```typescript
// content.ts ä¸­çš„é”™è¯¯å¤„ç†
} catch (error: any) {
  sendResponse({
    success: false,
    error: error.message || 'Unknown error'
  });
}
```

## âœ… ä¿®å¤åçš„å·¥ä½œæµç¨‹

### è¯·æ±‚æ‹¦æˆªæµç¨‹
1. **injected script** æ‹¦æˆªé¡µé¢ä¸­çš„fetch/XMLHttpRequest
2. **content script** æ¥æ”¶injected scriptçš„æ¶ˆæ¯
3. **background script** å¤„ç†è¯·æ±‚å’Œå“åº”ä¿¡æ¯
4. **DevToolsé¢æ¿** æ˜¾ç¤ºå®Œæ•´çš„è¯·æ±‚çŠ¶æ€

### å“åº”æ›´æ–°æµç¨‹
1. **injected script** æ•è·å“åº”ä¿¡æ¯
2. **content script** è½¬å‘å“åº”æ•°æ®
3. **background script** æ›´æ–°è¯·æ±‚çŠ¶æ€
4. **DevToolsé¢æ¿** å®æ—¶æ›´æ–°æ˜¾ç¤º

## ğŸš€ é¢„æœŸæ•ˆæœ

### è¯·æ±‚çŠ¶æ€æ˜¾ç¤º
- âœ… è¯·æ±‚çŠ¶æ€ä»Pendingæ­£ç¡®æ›´æ–°ä¸ºå®é™…çŠ¶æ€ç 
- âœ… å“åº”æ—¶é—´æ­£ç¡®è®¡ç®—å’Œæ˜¾ç¤º
- âœ… å“åº”å¤´å’Œå“åº”ä½“å®Œæ•´æ•è·
- âœ… å®æ—¶çŠ¶æ€æ›´æ–°

### è°ƒè¯•ä¿¡æ¯
- âœ… æ§åˆ¶å°è¾“å‡ºè¯¦ç»†çš„æ‹¦æˆªæ—¥å¿—
- âœ… è¯·æ±‚å’Œå“åº”ä¿¡æ¯å®Œæ•´è®°å½•
- âœ… é”™è¯¯ä¿¡æ¯æ¸…æ™°æ˜¾ç¤º

## ğŸ” æŠ€æœ¯ç»†èŠ‚

### æ‹¦æˆªæœºåˆ¶é€‰æ‹©
- **injected script**: åœ¨é¡µé¢ä¸Šä¸‹æ–‡ä¸­è¿è¡Œï¼Œèƒ½æ•è·åˆ°å®Œæ•´çš„è¯·æ±‚å“åº”
- **webRequest API**: åœ¨æ‰©å±•ä¸Šä¸‹æ–‡ä¸­è¿è¡Œï¼ŒæŸäº›ä¿¡æ¯å¯èƒ½ä¸å®Œæ•´

### æ¶ˆæ¯ä¼ é€’é“¾
```
injected script â†’ content script â†’ background script â†’ DevTools panel
```

### çŠ¶æ€æ›´æ–°æœºåˆ¶
- è¯·æ±‚åˆ›å»ºæ—¶: çŠ¶æ€ä¸ºPending
- å“åº”å®Œæˆæ—¶: çŠ¶æ€æ›´æ–°ä¸ºå®é™…çŠ¶æ€ç 
- å®æ—¶é€šçŸ¥: DevToolsé¢æ¿å®æ—¶æ›´æ–°

## ğŸ› ï¸ è°ƒè¯•å»ºè®®

å¦‚æœä»æœ‰PendingçŠ¶æ€ï¼Œè¯·æ£€æŸ¥ï¼š

1. **æ§åˆ¶å°æ—¥å¿—**: æŸ¥çœ‹æ˜¯å¦æœ‰æ‹¦æˆªæ—¥å¿—è¾“å‡º
2. **æ‰©å±•æƒé™**: ç¡®ä¿æ‰©å±•æœ‰æ­£ç¡®çš„æƒé™
3. **é¡µé¢åˆ·æ–°**: é‡æ–°åŠ è½½é¡µé¢æµ‹è¯•
4. **æ‰©å±•é‡è½½**: é‡æ–°åŠ è½½æ‰©å±•

ç°åœ¨HackDuckåº”è¯¥èƒ½æ­£ç¡®æ•è·å’Œæ˜¾ç¤ºè¯·æ±‚çŠ¶æ€äº†ï¼ğŸ‰
