# 编码/加密功能使用指南

## 🎯 功能概述

HackDuck 现在支持直接在文本编辑区域中选中文本并进行编码/解码操作，无需手动复制粘贴到其他工具。

## ✨ 支持的编码方式

### 编码功能
- **Base64 编码** 🔤 - 将文本编码为 Base64 格式
- **URL 编码** 🔗 - 将文本进行 URL 百分号编码
- **HTML 编码** 📝 - 将特殊字符转换为 HTML 实体
- **MD5 哈希** 🔐 - 计算文本的 MD5 哈希值
- **SHA256 哈希** 🔐 - 计算文本的 SHA256 哈希值

### 解码功能
- **Base64 解码** 🔓 - 解码 Base64 格式的文本
- **URL 解码** 🔓 - 解码 URL 百分号编码的文本
- **HTML 解码** 🔓 - 将 HTML 实体转换回原始字符

## 📖 使用方法

### 在 Burp Suite 模式中使用

1. 在左侧选择一个请求，加载到请求编辑器
2. 在请求编辑器中，**用鼠标选中**想要编码的文本（例如参数值、请求体内容等）
3. **右键点击**选中的文本
4. 在弹出的右键菜单中选择需要的编码/解码方式
5. 选中的文本会立即被替换为编码/解码后的结果
6. **使用 Ctrl+Z 撤销**，**Ctrl+Y 重做**编码操作

### 在 HackBar 模式中使用

1. 点击 "Load Current Page" 加载当前页面的 URL
2. 在 **URL 输入框**或**请求体文本框**中，**选中**想要编码的文本
3. **右键点击**选中的文本
4. 在弹出的右键菜单中选择需要的编码/解码方式
5. 选中的文本会立即被替换为编码/解码后的结果
6. **使用 Ctrl+Z 撤销**，**Ctrl+Y 重做**编码操作

## 🎮 实际应用场景

### 场景 1：测试 SQL 注入
```
原始：' OR 1=1--
Base64 编码：JyBPUiAxPTEtLQ==
URL 编码：%27%20OR%201%3D1--
```

### 场景 2：绕过 XSS 过滤
```
原始：<script>alert(1)</script>
HTML 编码：&lt;script&gt;alert(1)&lt;/script&gt;
Base64 编码：PHNjcmlwdD5hbGVydCgxKTwvc2NyaXB0Pg==
```

### 场景 3：生成密码哈希
```
原始：mypassword123
MD5：482c811da5d5b4bc6d497ffa98491e38
SHA256：ef92b778bafe771e89245b89ecbc08a44a4e166c06659911881f383d4473e94f
```

### 场景 4：处理 URL 参数
```
原始：https://example.com?name=张三&id=123
URL 编码参数：https://example.com?name=%E5%BC%A0%E4%B8%89&id=123
```

## 🔧 技术细节

### 编码实现
- **Base64**: 使用 `btoa()` 和 `atob()` 配合 `encodeURIComponent` 支持中文
- **URL编码**: 使用 `encodeURIComponent()` 和 `decodeURIComponent()`
- **HTML编码**: 字符串替换特殊字符（`&`, `<`, `>`, `"`, `'`）
- **MD5/SHA256**: 使用 Web Crypto API 的 `crypto.subtle.digest()`

### 交互体验
- **即时替换**: 编码后的结果会直接替换选中的文本
- **自动同步**: 替换后会自动触发 Vue 的响应式更新
- **错误处理**: 如果编码失败（如无效的 Base64），会提示错误信息

## 💡 使用技巧

1. **快速测试多种编码**: 选中同一段文本，可以连续尝试不同的编码方式
2. **编码链**: 先 URL 编码，再 Base64 编码，可以实现双重编码
3. **批量处理**: 在请求体中选中多个参数值，逐一编码
4. **验证哈希**: 使用 MD5/SHA256 快速验证数据完整性
5. **撤销/重做**: 使用 `Ctrl+Z` 撤销编码操作，`Ctrl+Y` 重做操作
6. **历史记录**: 系统自动记录最近 50 次编码操作，支持完整的撤销/重做链

## ⚠️ 注意事项

- 哈希操作（MD5、SHA256）是**不可逆**的，只能用于生成哈希值
- Base64 编码后的字符串长度会增加约 33%
- URL 编码后的中文字符会显著增加长度
- 右键菜单只在**选中文本**时才会显示编码选项
- **撤销/重做功能**只对编码操作有效，不会影响手动输入的文本
- 历史记录最多保存 50 次操作，超出会自动删除最旧的记录

## 🚀 快捷操作流程

### Burp Suite 模式
```
选择请求 → 选中文本 → 右键 → 选择编码 → 完成
撤销操作：Ctrl+Z → 重做操作：Ctrl+Y
```

### HackBar 模式
```
Load Current Page → 选中 URL/Body 文本 → 右键 → 选择编码 → Send Request
撤销操作：Ctrl+Z → 重做操作：Ctrl+Y
```

## 🔄 撤销/重做功能详解

### 支持的快捷键
- **Ctrl+Z** (Windows/Linux) 或 **Cmd+Z** (Mac): 撤销最后一次编码操作
- **Ctrl+Y** (Windows/Linux) 或 **Cmd+Y** (Mac): 重做被撤销的操作
- **Ctrl+Shift+Z** (Windows/Linux) 或 **Cmd+Shift+Z** (Mac): 重做操作（备选）

### 历史记录管理
- 系统自动记录每次编码操作的详细信息
- 包括操作类型、原始文本、编码后文本、时间戳
- 最多保存 50 次操作，超出自动删除最旧记录
- 支持跨文本区域的撤销/重做（URL输入框、请求体、请求编辑器）

### 使用场景示例
```
1. 选中 "hello world"
2. 右键 → Base64 编码 → 得到 "aGVsbG8gd29ybGQ="
3. 按 Ctrl+Z → 恢复为 "hello world"
4. 按 Ctrl+Y → 重新编码为 "aGVsbG8gd29ybGQ="
5. 继续其他编码操作...
```

## 📝 更新日志

- **v1.2.0** (2025-10-05)
  - ✨ 新增撤销/重做功能 (Ctrl+Z/Ctrl+Y)
  - 📝 历史记录管理，支持最多 50 次操作
  - 🔄 跨文本区域的撤销/重做支持
  - 💡 智能历史记录，自动管理操作链

- **v1.1.0** (2025-10-05)
  - ✨ 新增右键菜单编码功能
  - 🎨 支持 8 种编码/解码方式
  - 🔧 集成到 Burp Suite 和 HackBar 两个模式
  - 💡 即时替换选中文本，无需额外步骤

---

**提示**: 如果您有任何问题或建议，欢迎反馈！

